function loadImage(t){ie?(t.css("backgroundImage","url("+t.find(".gs-lazy").attr("data-lazy")+")"),t.find(".gs-lazy").remove(),t.hasClass("loaded")||t.addClass("loaded")):(t.hasClass("loading")||t.addClass("loading"),t.find(".gs-lazy").attr("src",t.find(".gs-lazy").attr("data-lazy")),t.find(".gs-lazy").on("load",function(){t.removeClass("idx-blazy loading"),t.find(".gs-lazy").removeAttr("data-lazy"),t.hasClass("loaded")||t.addClass("loaded")}))}function loadPropertySlider(t){var i=$("#"+t);if(i.removeClass("idx-blazy"),i.length)var n=i.greatSlider({type:"swipe",nav:!1,navSpeed:500,lazyLoad:!0,bullets:!0,items:1,layout:{bulletDefaultStyles:!1,wrapperBulletsClass:"idx-gs-wrapper-bullets"},onInited:function(){$a=0,$imgCount=0,$mapCount=0,$vidCount=0,$htmlButtonImg="",$htmlButtonMap="",$htmlButtonVid="",i.find(".img-slider").each(function(){var t=$(this).attr("data-lazy");$(this).hasClass("idx-img-map")?(i.find(".gs-bullet:eq("+$a+")").css({background:"url("+t+")"}),$mapCount+=1):$(this).hasClass("idx-img-vid")?(i.find(".gs-bullet:eq("+$a+")").addClass("idx-ico-play").html("<span></span>"),$vidCount+=1):(i.find(".gs-bullet:eq("+$a+")").css({background:"url("+t+")"}),$imgCount+=1),$a+=1}),0<$imgCount&&($htmlButtonImg='<button id="idx-btn-img" class="idx-btn-nav idx-icon-img active"><span>Photos<label>('+$imgCount+")</label></span></button>"),0<$mapCount&&($htmlButtonMap='<button id="idx-btn-map" class="idx-btn-nav idx-icon-map"><span>Mapa<label>('+$mapCount+")</label></span></button>"),0<$vidCount&&($htmlButtonVid='<button id="idx-btn-vid" class="idx-btn-nav idx-icon-vid"><span>Video<label>('+$vidCount+")</label></span></button>"),$(".idx-media-nav").html($htmlButtonImg+$htmlButtonMap+$htmlButtonVid);var t=i.find(".idx-img-map:eq(0)").parents(".gs-item-slider").index()+1,a=i.find(".idx-img-vid:eq(0)").parents(".gs-item-slider").index()+1;$(document).on("click",".idx-media-nav .idx-btn-nav",function(){switch($(".idx-media-nav .idx-btn-nav").removeClass("active"),$(this).addClass("active"),$(this).attr("id").split(" ")[0]){case"idx-btn-img":n.goTo(1);break;case"idx-btn-map":n.goTo(t);break;case"idx-btn-vid":n.goTo(a)}});var e=i.find(".gs-container-items");$("<div class='idx-gs-nav-btn'><button class='gs-prev-arrow'><span></span></button><button class='gs-next-arrow'><span></span></button></div>").appendTo(e),$(".idx-gs-nav-btn .gs-next-arrow").click(function(){n.goTo("next")}),$(".idx-gs-nav-btn .gs-prev-arrow").click(function(){n.goTo("prev")})}})}function loadGenSlider(t){function a(){n.find(".gs-item-slider").removeClass("gs-item-active-b");var t=0,a=s.getActive().index,e=s.getItems(),i=a-(e-1);if(1==a&&(a=2),1<e)for(t=i;t<=a;t++)n.find(".gs-item-slider:nth-child("+t+")").addClass("gs-item-active-b")}var n=$("#"+t);if(n.length)var s=n.greatSlider({type:"swipe",nav:!1,lazyLoad:!0,bullets:!1,items:1,layout:{arrowDefaultStyles:!1,itemLoadingClass:""},breakPoints:{640:{items:2,nav:!0},1100:{items:3},1400:{items:4}},onInited:function(){setTimeout(function(){a()},300),n.find(".idx-grid-ng-img").each(function(){loadImage($(this))})},onStepStart:function(){a()},onResized:function(){setTimeout(function(){a()},300)}})}function graphGenerator(t){var a=JSON.parse($("#"+t).attr("data-element")),e=JSON.parse($("#"+t).attr("data-labels")),i=$("#"+t).attr("data-color"),n=document.getElementById(t).getContext("2d"),s=parseInt(i.substring(0,2),16),o=parseInt(i.substring(2,4),16),d=parseInt(i.substring(4,6),16);new Chart(n,{type:"bar",responsive:!0,data:{labels:e,datasets:[{label:"",data:a,backgroundColor:"rgba("+s+", "+o+", "+d+",0.3)",borderWidth:2}]},options:{scaleFontColor:"red",scales:{yAxes:[{ticks:{beginAtZero:!0,fontColor:"#FFF"}}],xAxes:[{ticks:{fontColor:"#FFF"}}]},legend:{display:!1},tooltips:{yAlign:"bottom",displayColors:!1,callbacks:{label:function(t,a){return a.labels[t.index]+": "+a.datasets[t.datasetIndex].data[t.index]},title:function(t,a){}}}}})}function creaIframeVideo(t){if(void 0!==(a=t.attr("data-video"))){var a;if(-1!==(a=a.toString()).indexOf("youtube")){var e=a.lastIndexOf("&");-1!==e&&(a=a.substring(0,e));var i=a.indexOf("embed");-1!==i&&(a="https://www.youtube.com/watch?v="+a.substring(i+6,i+17));var n="https://www.youtube.com/embed/"+a.substring(a.length-11,a.length)+"?autoplay=1"}else{if(-1===a.indexOf("vimeo"))return alert("The video assigned is not from Youtube or Vimeo, remember to enter the correct complete link of the video .\n - Youtube: https://www.youtube.com/watch?v=9RBSH7Xvn3Q\n - Vimeo: https://vimeo.com/206418873"),!1;n="https://player.vimeo.com/video/"+a.substring(a.indexOf(".com")+5,a.length).replace("/","")}return'<iframe src="'+n+'" frameborder="0" allowfullscreen></iframe>'}return alert("No video assigned."),!1}function onScroll(t){var a=$(document).scrollTop();$("#idx-internal-nav li a").each(function(){var t=$($(this).attr("href"));t.offset().top-60<=a&&t.offset().top-60+(t.height()-60)>a?($("#idx-internal-nav li a").removeClass("active"),$(this).addClass("active")):$(this).removeClass("active")})}function loadElement(t){t.each(function(){switch($(this).attr("data-type").split(" ")[0]){case"img":loadImage($(this));break;case"graph":graphGenerator($(this).find("canvas").attr("id"));break;case"main-slider":loadPropertySlider($(this).attr("id"));break;case"gen-slider":loadGenSlider($(this).attr("id"))}})}var userAgent,ieReg,ie;userAgent=window.navigator.userAgent,ie=(ieReg=/msie|Trident.*rv[ :]*11\./gi).test(userAgent),function(i){i(document).on("load, scroll",onScroll),i(document).on("click",".idx-btn-sm",function(){i(this).toggleClass("active"),i(this).parents(".idx-wrap").find(".idx-basic-list").toggleClass("active")}),i(document).on("click","#idx-internal-nav li a",function(t){t.preventDefault(),i(document).off("scroll"),i("#idx-internal-nav li a").each(function(){i(this).removeClass("active")}),i(this).addClass("active");var a=this.hash;$target=i(a),i("html, body").stop().animate({scrollTop:$target.offset().top-30},500,"swing",function(){i(document).on("scroll",onScroll)})}),i(document).on("click",".idx-btn-play",function(t){t.preventDefault();var a=creaIframeVideo(i(this));if(a){var e=i("#idx-wrap-video");(e=i("body")).append('<div class="idx-video-inside"><div class="idx-iframe"><div class="idx-wrap-iframe">'+a+'</div></div><button class="idx-modal-close"><span></span></button><div class="idx-modal-bg-close"></div></div>'),setTimeout(function(){e.find(".idx-video-inside").addClass("active")},500)}}),i(document).on("click",".idx-modal-close, .idx-modal-bg-close",function(){var t=i(this).parent();i("body").find(".idx-video-inside").removeClass("active"),setTimeout(function(){t.remove()},500)});i(window).on("load scroll",function(){var e=i(document).scrollTop();i(".idx-load-element").each(function(){var t=i("#"+i(this).attr("id"));if(t.offset().top-700<=e){var a=t.find(".idx-blazy");a.length&&(a.hasClass("loaded")||(a.addClass("loaded"),loadElement(a)))}})})}(jQuery);